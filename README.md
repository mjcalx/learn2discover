# User Guide

## Before you start
Before any of the python files can be run within this project, after navigating to
the learn2discover directory, you must run the command
`pip install -r requirements.txt` to install all required dependencies.

## Data Generator

The data generator will take an existing set of data from a source like COMPAS, and will
modify it using a schema file created for that dataset so that it is usable by the rest
of Learn2Discover.

### Data Schema File

The schema file for each type of data defines each column of the data csv file with a name
and one of four types, numerical, date, id, or categorical.

Numerical: The data is in simple number format and may include decimals

Date: The data is in date format mm/dd/yyyy

id: a unique set of characters, i.e. name or studentId

categorical: This is the main attributes that will be looked at when labelling the test cases
i.e. gender

An example layout of the data schema file is as follows

```yml
Case_ID:
  type: id

Agency_Text :
  type : categorical
  values :  ['Broward County', 'Probation', 'PRETRIAL', 'DRRD']

LastName:
  type: id
```

### Config File
The config file is where you will configure the location of your schema and raw data
files as well as where you would like the generated output data to be placed. You can also
set a delimiter for your separators within your csv or xclx file i.e. ',' for csv, '\t'
for xclx.

### How to Run the Generator
Once the schema and config files are set up and you have the raw data downloaded, simply
run the `generate_data.py` file through your ide or run the command `python generate_data.py`
in your terminal whilst in the correct directory. This will generate the file you specified
within the `config.yml` file. 


## Learn2Discover

### Setting Up
Learn2Discover is the main part of this project and will generate graphs and data
that can be used to measure it's effectiveness. This documentation will guide you on
how to make sense of the data you produce.

To run Learn2Discover, you simple run the file `l2d.py` via the terminal or ide. If
an error occurs, check you have all the required libraries installed (this is assuming
you followed the steps above and installed the requirements.txt file). Installing the libraries
is as simple as running `pip install <library name>`

#### results_generation.py
This is another results generator, and will actually run the l2d.py multiple times
and will generate more data based off of that. The default amount of times is 100, however
this can be changed in the `results_generation.py` file in the definition for the first function.

### Analysing the Data Generated
Data is generated in the `report` folder under a newly created folder. There are three main
files here that can be used to analyse the data that Learn2Discover has produced.

#### Confusion Matrix
The confusion matrix is an image depicting a 2x2 matrix, each side with a value of 1 or 0
this image is used to determine how many false positives Learn2Discover produced. The bottom
left and top right are the two false positive sections. In the example data it can be seen that
the false positives generated by Learn2Discover are incredible low compared to the total amount
of labelled cases.

#### Raw Data
This is simply a csv file of the data used to generate the graphs in `results.html`

#### Results.html
This is the main results file and will generate a graph and a table based off the decisions
of Learn2Discover. This can be viewed by dragging the file into your web browser. It will
open a new tab. The graph can be viewed as a percentage on the y axis and number of iterations
on the x axis. Looking at the example result data, Learn2Discover becomes more accurate, precise,
and confident in its choices the more iterations it learns from.

# Project Layout
        ├── data_generation            <-- code and config files required to generate fairness testing datasets
        │   ├── suts/                  <-- sample SUTs (systems under test) and config files
        │   ├── generate_data.py       <-- executable for generating fairness testing datasets
        │   ├── config.yml             <-- config file to be used for generating fairness testing dataset
        ├── datasets
        │   └── generated/             <-- generated fairness testing datasets, to be used as input to model training
        │   ├── original/              <-- original datasets
        │   └── schemas/               <-- schemas for differentiating inputs vs outputs, and var types
        ├── learn2discover
        │   ├── config.yml             <-- default config file for Learn2Discover
        │   ├── configs/               <-- contains loader class for main config file
        │   ├── data/                  <-- helper classes for managing data
        │   ├── l2d.py                 <-- main executable, runs Learn2Discover
        │   ├── loggers/      
        │   ├── oracle/
        │   │   ├── query_strategies/
        │   │   └── stopping_criteria/
        │   ├── report/                <-- reports generated by running Learn2Discover
        │   └── utils/                 <-- additional helper classes
        ├── LICENSE
        ├── README.md
        └── requirements.txt  <-- library versions used in development

